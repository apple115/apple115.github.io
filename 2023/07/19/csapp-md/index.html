<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="csapp.md" />
    <meta name="hexo-theme-A4" content="v1.8.9" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>apple115 の blog</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery.min.css">


<meta name="generator" content="Hexo 7.1.1"></head>
    
    
    <body>
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">apple115 の blog</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            csapp.md
        </div>
      
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BF%A1%E6%81%AF%E5%B0%B1%E6%98%AF%E4%BD%8D%E5%8A%A0%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="post-toc-text">信息就是位加上下文</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-%E7%A8%8B%E5%BA%8F%E8%A2%AB%E5%85%B6%E4%BB%96%E7%A8%8B%E5%BA%8F%E7%BF%BB%E8%AF%91%E6%88%90%E4%B8%8D%E5%90%8C%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="post-toc-text">2 程序被其他程序翻译成不同的格式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E8%BF%90%E8%A1%8Chello%E7%A8%8B%E5%BA%8F"><span class="post-toc-text">运行hello程序</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%85%B3%E4%BA%8E%E5%AD%98%E5%82%A8%E8%AE%BE%E9%85%8D%E7%9A%84"><span class="post-toc-text">关于存储设配的</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="post-toc-text">存储器层次结构</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="post-toc-text">操作系统</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%BF%9B%E7%A8%8B"><span class="post-toc-text">进程</span></a></li></ol></li></ol>
            
        
        <link rel="stylesheet" type="text/css" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/lightgallery.min.css" /><div class=".article-gallery"><p>csapp的简单摸索</p>
<p>这是我学习csapp所做的笔记<br>如有错误请评论或邮箱告知<br><code>2567031030@qq.com</code><br>会按照书上的讲写笔记(因为我也从头开始看的)，但只会记录我觉得重要的</p>
<h2 id="信息就是位加上下文"><a href="#信息就是位加上下文" class="headerlink" title="信息就是位加上下文"></a>信息就是位加上下文</h2><p>对于一个hello.c 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">int main()&#123;</span><br><span class="line">    printf(&quot;hello,world\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>使用<code>od -t d1 hello.c</code></p>
<p>可以将<code>hello.c</code>以10进制看到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0000000   35  105  110   99  108  117  100  101   32   60  115  116  100  105  111   46</span><br><span class="line">0000020  104   62   10   10  105  110  116   32  109   97  105  110   40   41   32  123</span><br><span class="line">0000040   10   32   32  112  114  105  110  116  102   40   34  104  101  108  108  111</span><br><span class="line">0000060   32  119  111  114  108  100   33   92  110   34   41   59   10   32   32  114</span><br><span class="line">0000100  101  116  117  114  110   32   48   59   10  125   10</span><br><span class="line">0000113</span><br></pre></td></tr></table></figure>


<p>在计算机眼中</p>
<ol>
<li>系统中的所有信息，都是由<strong>一串比特</strong>表示的(说到底都是01)。</li>
<li>区分不同数据的唯一方法是我们读到这些数据的上下文</li>
</ol>
<p>例如:<br>在不同的上下文中，一个同样的字节序列可以表示一个整数，浮点数，字符串，或着机器指令</p>
<p>有一个例子可以证明，新建一个1.ppm</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">P3</span><br><span class="line">4 4</span><br><span class="line">255</span><br><span class="line">0  0  0   100 0  0       0  0  0    255   0 255</span><br><span class="line">0  0  0    0 255 175     0  0  0     0    0  0</span><br><span class="line">0  0  0    0  0  0       0 15 175    0    0  0</span><br><span class="line">255 0 255  0  0  0       0  0  0    255  255 255</span><br></pre></td></tr></table></figure>

<p>这是一种图片格式.ppm</p>
<p>你可以看看这张图</p>
<hr>
<h2 id="2-程序被其他程序翻译成不同的格式"><a href="#2-程序被其他程序翻译成不同的格式" class="headerlink" title="2 程序被其他程序翻译成不同的格式"></a>2 程序被其他程序翻译成不同的格式</h2><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>可以看一下图片</p>
<p>![从hello.c到hello](<a target="_blank" rel="noopener" href="https://i.ibb.co/tpj2GLV/Deepin-Screenshot-select-area-20230722110544.png">https://i.ibb.co/tpj2GLV/Deepin-Screenshot-select-area-20230722110544.png</a> &#x3D; 100x50)</p>
<p>由hello.c-&gt;hello.i</p>
<p>可以使用<code>gcc -E</code> 进行<strong>预处理</strong></p>
<p><code>gcc -E hello.c -o hello.i</code></p>
<p>也可以使用<code>cpp</code></p>
<p>hello.i-&gt;hello.s</p>
<p>可以使用<code>gcc -S</code> 进行<strong>编译</strong>，生成汇编代码</p>
<p><code>gcc -S hello.i -o hello.i</code></p>
<p>在这一阶段中编译器会进行优化,会发现汇编与C的语言代码不能一一对应</p>
<p>当然gcc 可以指定是否优化</p>
<p>hello.s-&gt;hello.o</p>
<p>使用<code>gcc -c</code>进行<strong>汇编</strong>，生成目标文件</p>
<p><code>gcc -c hello.s -o hello.o</code></p>
<p>hello.o-&gt;hello</p>
<p><strong>链接</strong>生成可执行文件</p>
<p><code>gcc hello.o -o hello</code></p>
<p>这上面</p>
<p>可以用一句话</p>
<p><code>gcc hello.c -o hello</code></p>
<ul>
<li>预处理阶段</li>
</ul>
<p>预处理(cpp)根据<code>#</code>字符开头的命令</p>
<ol>
<li><p>如<code>#include&lt;stdio.h&gt;</code>把这个<code>stdio.h</code>的文件直接插入</p>
</li>
<li><p>如<code>#define</code>这种宏进行处理</p>
</li>
</ol>
<ul>
<li>编译阶段</li>
</ul>
<p>就是将c的代码转换为汇编的代码</p>
<ul>
<li>汇编阶段</li>
</ul>
<p>将汇编代码转换为机器语言的指令,把这些指令打包成一种叫<strong>可重定位目标程序</strong>(relocatable object program)的格式</p>
<ul>
<li>链接阶段</li>
</ul>
<p><code>hello</code>程序调用了<code>printf</code>函数,<code>printf</code>函数是标准C库中的函数，</p>
<p><code>printf</code>函数存在与一个名为<code>printf.o</code>的一个预预编译好了的目标文件中,</p>
<p>链接器(ld)就处理这种合并</p>
<p>(如果想要更多的查询关于gcc)</p>
<p>可以使用<code>man gcc</code> 进行观看</p>
<p>使用<code>man gcc | vim -</code>可以使用管道将<code>man gcc</code>传入<code>vim</code>进行观看</p>
<hr>
<h2 id="运行hello程序"><a href="#运行hello程序" class="headerlink" title="运行hello程序"></a>运行hello程序</h2><p>未完待续.。。<br>date: 2023-07-23 18:31:00</p>
<p>一图抵万字,哈哈哈！</p>
<p><a target="_blank" rel="noopener" href="https://i.ibb.co/hWjgTh7/Deepin-Screenshot-select-area-20230723172447.png" title="系统结构图" class="gallery-item" style="box-shadow: none;"> <img src="https://i.ibb.co/hWjgTh7/Deepin-Screenshot-select-area-20230723172447.png" alt="系统结构图"></a><br>可以将硬件分：</p>
<ol>
<li><p>总线<br>贯穿整个系统的电子管道，称为总线.它携带信息字体并负责在各个部件间传输</p>
</li>
<li><p>I&#x2F;O 设备</p>
</li>
</ol>
<p>就是除了总线，主存，处理器以外的都是(例如：键盘，鼠标，磁盘，显示器等网络是种特殊的I&#x2F;O设配)</p>
<ol start="3">
<li>主存</li>
</ol>
<p>是一个临时存储设配，在处理器执行期间，用来存放程序和程序处理的数据</p>
<p>可以从两方面视角来看计算机:计算机视角和用户视角(物理视角和逻辑视角)<br>物理视角:主存是由一组动态随机存取存储器(DRAM)芯片组成的<br>逻辑视角:存储器是一个线性的字节数组,每个字节都有其唯一的地址(数组索引)</p>
<ol start="4">
<li>处理器</li>
</ol>
<p>就写一个概念吧<br>中央处理单元(cpu),是解释(或执行)存储在主存中的指令引擎<br>在shell上运行<code>./hello</code><br>这个<code>hello</code> 是<code>./hello</code><br><code>shell</code>是一个命令行解释器，它输出一个提示符，等待输入一个命令行，然后执行这个命令<br>是用来与系统交互的</p>
<p><a target="_blank" rel="noopener" href="https://i.ibb.co/whFGdcv/Deepin-Screenshot-select-area-20230723173257.png" title="从键盘上读取hello的命令" class="gallery-item" style="box-shadow: none;"> <img src="https://i.ibb.co/whFGdcv/Deepin-Screenshot-select-area-20230723173257.png" alt="从键盘上读取hello的命令"></a></p>
<p>这个使用了<strong>直接存储器存储</strong>(DMA)，数据可以不用通过处理器而直接从磁盘到达主存<br><a target="_blank" rel="noopener" href="https://i.ibb.co/1JYbrkk/Deepin-Screenshot-select-area-20230723174001.png" title="从磁盘加载可执行文件到主存上" class="gallery-item" style="box-shadow: none;"> <img src="https://i.ibb.co/1JYbrkk/Deepin-Screenshot-select-area-20230723174001.png" alt="从磁盘加载可执行文件到主存上"></a></p>
<p><a target="_blank" rel="noopener" href="https://i.ibb.co/SKbNQVJ/Deepin-Screenshot-select-area-20230723174419.png" title="将输出字符串从存储器写到显示器" class="gallery-item" style="box-shadow: none;"> <img src="https://i.ibb.co/SKbNQVJ/Deepin-Screenshot-select-area-20230723174419.png" alt="将输出字符串从存储器写到显示器"></a></p>
<p>来看看流程</p>
<ol>
<li><p>在shell 中输入<code>./hello</code>,shell程序将字符逐一读入寄存器,再将它存放在内存中(内存一般指的是主存)</p>
</li>
<li><p>在键盘上按回车时，shell 程序知道我们已经结束了命理的输入</p>
</li>
<li><p>shell执行一系列指令来加载<strong>可执行的hello文件</strong>,这些指令将<strong>hello目标文件</strong>中的代码和数据从磁盘复制到主存</p>
</li>
<li><p>目标文件hello中的代码和数据加载到主存，处理器就开始执行hello程序的main程序中的机器语言指令</p>
</li>
<li><p>这些指令将<code>“hello,world\n</code>字符串中的字节从主存复制到寄存器文件，再从寄存器文件中复制到显示设配,最终显示到屏幕上</p>
</li>
</ol>
<p>可以使用命令<code>strace ./hello</code></p>
<p>在我的电脑上会显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">execve(&quot;./hello&quot;, [&quot;./hello&quot;], 0x7ffcdebfb7e0 /* 64 vars */) = 0</span><br><span class="line">brk(NULL)                               = 0x55eb43cde000</span><br><span class="line">arch_prctl(0x3001 /* ARCH_??? */, 0x7ffe3bbb3000) = -1 EINVAL (Invalid argument)</span><br><span class="line">access(&quot;/etc/ld.so.preload&quot;, R_OK)      = -1 ENOENT (No such file or directory)</span><br><span class="line">openat(AT_FDCWD, &quot;/etc/ld.so.cache&quot;, O_RDONLY|O_CLOEXEC) = 3</span><br><span class="line">newfstatat(3, &quot;&quot;, &#123;st_mode=S_IFREG|0644, st_size=186503, ...&#125;, AT_EMPTY_PATH) = 0</span><br><span class="line">mmap(NULL, 186503, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7fd7fa95a000</span><br><span class="line">close(3)                                = 0</span><br><span class="line">openat(AT_FDCWD, &quot;/usr/lib/libc.so.6&quot;, O_RDONLY|O_CLOEXEC) = 3</span><br><span class="line">read(3, &quot;\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\20:\2\0\0\0\0\0&quot;..., 832) = 832</span><br><span class="line">pread64(3, &quot;\6\0\0\0\4\0\0\0@\0\0\0\0\0\0\0@\0\0\0\0\0\0\0@\0\0\0\0\0\0\0&quot;..., 784, 64) = 784</span><br><span class="line">newfstatat(3, &quot;&quot;, &#123;st_mode=S_IFREG|0755, st_size=1961632, ...&#125;, AT_EMPTY_PATH) = 0</span><br><span class="line">mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fd7fa958000</span><br><span class="line">pread64(3, &quot;\6\0\0\0\4\0\0\0@\0\0\0\0\0\0\0@\0\0\0\0\0\0\0@\0\0\0\0\0\0\0&quot;..., 784, 64) = 784</span><br><span class="line">mmap(NULL, 2006640, PROT_READ, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7fd7fa76e000</span><br><span class="line">mmap(0x7fd7fa790000, 1429504, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x22000) = 0x7fd7fa790000</span><br><span class="line">mmap(0x7fd7fa8ed000, 360448, PROT_READ, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x17f000) = 0x7fd7fa8ed000</span><br><span class="line">mmap(0x7fd7fa945000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1d6000) = 0x7fd7fa945000</span><br><span class="line">mmap(0x7fd7fa94b000, 52848, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7fd7fa94b000</span><br><span class="line">close(3)                                = 0</span><br><span class="line">mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fd7fa76c000</span><br><span class="line">arch_prctl(ARCH_SET_FS, 0x7fd7fa959640) = 0</span><br><span class="line">set_tid_address(0x7fd7fa959910)         = 33357</span><br><span class="line">set_robust_list(0x7fd7fa959920, 24)     = 0</span><br><span class="line">rseq(0x7fd7fa959f60, 0x20, 0, 0x53053053) = 0</span><br><span class="line">mprotect(0x7fd7fa945000, 16384, PROT_READ) = 0</span><br><span class="line">mprotect(0x55eb42bba000, 4096, PROT_READ) = 0</span><br><span class="line">mprotect(0x7fd7fa9b9000, 8192, PROT_READ) = 0</span><br><span class="line">prlimit64(0, RLIMIT_STACK, NULL, &#123;rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY&#125;) = 0</span><br><span class="line">munmap(0x7fd7fa95a000, 186503)          = 0</span><br><span class="line">newfstatat(1, &quot;&quot;, &#123;st_mode=S_IFIFO|0600, st_size=0, ...&#125;, AT_EMPTY_PATH) = 0</span><br><span class="line">getrandom(&quot;\xb8\xd2\x6c\x88\x21\xbd\x4c\x5a&quot;, 8, GRND_NONBLOCK) = 8</span><br><span class="line">brk(NULL)                               = 0x55eb43cde000</span><br><span class="line">brk(0x55eb43cff000)                     = 0x55eb43cff000</span><br><span class="line">write(1, &quot;hello world!\n&quot;, 13)          = 13</span><br><span class="line">hello world!</span><br><span class="line">exit_group(0)                           = ?</span><br><span class="line">+++ exited with 0 +++</span><br><span class="line">strace: Exit of unknown pid 33354 ignored</span><br></pre></td></tr></table></figure>

<p>这是chatgpt所说</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">根据提供的跟踪信息，以下是对程序执行的步骤进行逐步解释:</span><br><span class="line"></span><br><span class="line">1. 尝试以读取方式打开文件 &quot;/etc/ld.so.preload&quot;，但该文件未找到（ENOENT - 没有此文件或目录）。</span><br><span class="line"></span><br><span class="line">2. 成功以只读方式（O_RDONLY|O_CLOEXEC）打开文件 &quot;/etc/ld.so.cache&quot;，并获取了文件描述符 3。</span><br><span class="line"></span><br><span class="line">3. 在文件描述符 3 上执行 &quot;newfstatat&quot; 系统调用，以获取有关文件的信息。获取到的信息表明该文件是一个具有读写权限的普通文件，大小为 186503 个字节。</span><br><span class="line"></span><br><span class="line">4. 然后，程序使用 &quot;mmap&quot; 系统调用将文件 &quot;/etc/ld.so.cache&quot;（186503 个字节）的内容映射到内存中，采用只读保护（PROT_READ），映射内存区域的起始地址为 0x7fd7fa95a000。</span><br><span class="line"></span><br><span class="line">5. 映射完成后，程序关闭了文件描述符 3，即 &quot;/etc/ld.so.cache&quot;。</span><br><span class="line"></span><br><span class="line">6. 程序打开了文件 &quot;/usr/lib/libc.so.6&quot;，即 C 库文件，以进行读取。</span><br><span class="line"></span><br><span class="line">7. 它将 C 库文件 (&quot;/usr/lib/libc.so.6&quot;) 的前 832 个字节读入内存。</span><br><span class="line"></span><br><span class="line">8. 使用 &quot;pread64&quot; 系统调用，程序从 libc 文件中读取 ELF 对象格式的内容表示。</span><br><span class="line"></span><br><span class="line">9. 在文件描述符 3 上执行 &quot;newfstatat&quot; 系统调用，程序获取到 libc 文件的信息。获取到的信息表明该文件是一个具有读写权限的普通文件，大小为 1961632 个字节。</span><br><span class="line"></span><br><span class="line">10. 程序使用 &quot;mmap&quot; 系统调用，将一个具有读写权限（PROT_READ|PROT_WRITE）的内存区域（8192 个字节）映射到内存中。映射内存区域的起始地址为 0x7fd7fa958000。</span><br><span class="line"></span><br><span class="line">11. 使用 &quot;pread64&quot;，程序再次从 libc 文件读取 ELF 对象格式的内容表示。</span><br><span class="line"></span><br><span class="line">12. 程序继续使用额外的 &quot;mmap&quot; 系统调用将 libc 文件的内容映射到不同权限的多个内存区域。</span><br><span class="line"></span><br><span class="line">13. 将 libc 文件的文件描述符设置为关闭（文件描述符 3）。</span><br><span class="line"></span><br><span class="line">14. 程序使用 &quot;mmap&quot; 系统调用分配一个新的具有读写权限的内存区域，大小为 8192 个字节。</span><br><span class="line"></span><br><span class="line">15. 还进行了一些设置线程特定属性和程序属性的系统调用。</span><br><span class="line"></span><br><span class="line">16. 程序使用 &quot;mprotect&quot; 系统调用在不同的内存区域上应用内存保护。</span><br><span class="line"></span><br><span class="line">17. 程序使用 &quot;getrandom&quot; 系统调用获取随机字节序列。</span><br><span class="line"></span><br><span class="line">18. 使用 &quot;brk&quot; 系统调用分配一个新的堆内存区域。</span><br><span class="line"></span><br><span class="line">19. 使用类似的 &quot;brk&quot; 系统调用扩展堆内存区域。</span><br><span class="line"></span><br><span class="line">20. 最后，程序向标准输出（文件描述符 1）写入字符串 &quot;hello world!\n&quot;。</span><br><span class="line"></span><br><span class="line">21. 程序通过调用 &quot;exit_group&quot; 结束，状态码为 0，表示执行成功。</span><br><span class="line"></span><br><span class="line">注意：跟踪还显示了一个未知进程（pid 33354）的退出被忽略，以及使用了 &quot;prlimit64&quot; 和 &quot;munmap&quot; 系统调用，这些与上述程序的行为无关。</span><br></pre></td></tr></table></figure>


<p>我可以简单的看出是比较符合所说的</p>
<p>从这个示例看出来，系统花费大量的时间把信息从一个地方挪到一个地方</p>
<h3 id="关于存储设配的"><a href="#关于存储设配的" class="headerlink" title="关于存储设配的"></a>关于存储设配的</h3><p>好累 这个书是真的有意思但讲不清</p>
<p>未完待续.。。<br>date: 2023-07-27 22:53:00</p>
<p>处理器从寄存器文件中读取数据比从主存读数度要快100倍以上,处理器与主存之间的距离速度还在增大<br>为了解决这些问题<br>系统设计者采用了更小更快的存储设备,称为<strong>高速缓存存储器(cache memory)</strong><br>作为暂时的集结区存放处理器近期可能需要的信息</p>
<p>高速缓存的<strong>局部性</strong>原理,程序具有访问局部区域里的数据和代码的趋势,<br>通过让高速缓存存放可能经常访问的数据,大部分的内存操作都能在快速的高速缓存中完成</p>
<h2 id="存储器层次结构"><a href="#存储器层次结构" class="headerlink" title="存储器层次结构"></a>存储器层次结构</h2><hr>
<p>一图抵万字<br><a target="_blank" rel="noopener" href="https://i.ibb.co/sKLmpjX/Deepin-Screenshot-select-area-20230727230659.png" title="存储器层次结构" class="gallery-item" style="box-shadow: none;"> <img src="https://i.ibb.co/sKLmpjX/Deepin-Screenshot-select-area-20230727230659.png" alt="存储器层次结构"></a></p>
<h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><p>shell运行hello程序时,hello 程序输出自己消息时,shell 和hello程序会通过<br>操作系统进行访问键盘,显示器,磁盘,主存<br>操作系统是应用程序和硬件之间的一层软件,所有程序对于硬件的尝试都必须通过<br>操作系统<br>基本作用</p>
<ol>
<li>防止硬件被失控的应用程序滥用</li>
<li>向程序提供简单一致的机制来控制复杂而又通常大不想同的低级硬件设备</li>
</ol>
<p>操作系统通过几个基本的抽象概念(进程，虚拟内存和文件)来实现这两个功能<br><a target="_blank" rel="noopener" href="https://i.ibb.co/5jLxsXP/Deepin-Screenshot-select-area-20230727231656.png" title="计算机系统的分层视图和操作系统的抽象表示" class="gallery-item" style="box-shadow: none;"> <img src="https://i.ibb.co/5jLxsXP/Deepin-Screenshot-select-area-20230727231656.png" alt="计算机系统的分层视图和操作系统的抽象表示"></a></p>
<h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><p><strong>进程</strong>是操作系统对一个正在运行的程序的一种抽象<br>一个系统上可以运行多个进程,每个进程都好像认为自己在独占的使用硬件<br><strong>并发运行</strong> 是指一个进程的指令和另一个指令是交错运行的</p>
<p>在大多数系统中,需要的进程数是多于可以运行它们的cpu个数的.<br>传统的系统在一个时刻只能运行一个程序,而先进的多核处理器可以执行多个程序</p>
</div><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-07-19</span>
            
                <span>该篇文章被 apple115</span>
            
            
                <span>打上标签:
                    
                    
                        <a href='/tags/learn/'>
                            learn
                        </a>
                    
                </span>
             
             
        
        </i>
    </div>
    <br>
    
    <!-- <div class="post-footer-pre-next">
        <span>上一篇：<a href=""></a></span>
        <span class="post-footer-pre-next-last-span-right">上一篇：<a href=""></a></span>
    </div> -->

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            © 1949-2024 China 

            
                

            
        </span>
    
</div>
<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>🌊看过大海的人不会忘记海的广阔🌊</span>
            
                <span class="footer-last-span-right"><i>本站由<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>驱动｜使用<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>主题</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery.min.js"></script>



                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>


    <!--暗黑模式-->
    <script src="/js/darkmode-js.min.js"></script>
    <script>
        function addDarkmodeWidget() {
        const options = {
            bottom: '53px', // default: '32px'
            right: 'unset', // default: '32px'
            left: '42px', // default: 'unset'
            time: '0.3s', // default: '0.3s'
            mixColor: '#fff', // default: '#fff'
            backgroundColor: ' #e4e4e4 ',  // default: '#fff'
            buttonColorDark: '#100f2c',  // default: '#100f2c'
            buttonColorLight: '#fff', // default: '#fff'
            saveInCookies: true, // default: true,
            label: '🌓', // default: ''
            autoMatchOsTheme: true // default: true
        }
    
        const darkmode = new Darkmode(options);
        darkmode.showWidget();
        
        }
        window.addEventListener('load', addDarkmodeWidget);
    </script>
  
</html>